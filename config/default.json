{
  "$schema": "../src/schema/common/config.json",
  "availablePlans": ["plan-basic", "plan-educational", "plan-researcher"],
  "openapi": {
    "validateRequests": true,
    "validateResponses": true,
    "validateSpec": true
  },
  "allowedCorsOrigins": [
    "http://localhost:4321",
    "http://localhost:4173",
    "http://localhost:5173",
    "http://localhost:8080",
    "https://impresso-project.ch/app",
    "https://dev.impresso-project.ch/app"
  ],
  "rateLimiter": {
    "enabled": false,
    "capacity": 10,
    "refillRate": 0.016
  },
  "callbackUrls": {
    "passwordReset": "http://localhost:8080/password-reset"
  },
  "host": "localhost",
  "port": 3030,
  "public": "../public/",
  "features": {
    "textReuse": { "enabled": true }
  },
  "redis": {
    "host": "localhost"
  },
  "cache": {
    "enabled": true
  },
  "celery": {
    "enable": false,
    "brokerUrl": "redis://localhost/4",
    "backendUrl": "redis://localhost/5"
  },
  "appHooks": {
    "alwaysRequired": false,
    "excludePaths": [
      "search",
      "issues",
      "pages",
      "articles",
      "newspapers",
      "pages-timelines",
      "issues-timelines",
      "articles-timelines"
    ]
  },
  "authentication": {
    "entity": "user",
    "service": "users",
    "secret": "***********",
    "authStrategies": ["local", "jwt-app", "jwt"],
    "jwtOptions": {
      "header": {
        "typ": "access"
      },
      "audience": "http://localhost:3030",
      "issuer": "impresso-v1",
      "algorithm": "HS256",
      "expiresIn": "7d"
    },
    "local": {
      "entity": "user",
      "usernameField": "email",
      "passwordField": "password"
    },
    "cookie": {
      "enabled": true,
      "name": "feathers-jwt",
      "httpOnly": true,
      "secure": true
    }
  },
  "media": {
    "host": "http://localhost:3030",
    "path": "/media",
    "protectedPath": "/protected-media",
    "services": ["jobs"]
  },
  "multer": {
    "dest": "/tmp/multer"
  },
  "images": {
    "baseUrl": "http://localhost:5173/proxy/iiif",
    "proxy": {
      "defaultSourceId": "placeholder",
      "sources": [
        {
          "id": "placeholder",
          "endpoint": "https://example.com/iiif/",
          "auth": {
            "user": "user",
            "pass": "password"
          }
        }
      ]
    },
    "rewriteRules": [
      {
        "pattern": "^(https://dhlabsrv17.epfl.ch/iiif_impresso)",
        "replacement": "/proxy/iiif"
      },
      {
        "pattern": "^(https://impresso-project.ch/assets/images)",
        "replacement": "/assets/images"
      },
      {
        "pattern": "^(https://impresso-project.ch/api/proxy/iiif)",
        "replacement": "/proxy/iiif"
      },
      {
        "pattern": "^(https://scriptorium.bcu-lausanne.ch/api/iiif-img)",
        "replacement": "https://www.scriptorium.ch/api/iiif-img"
      }
    ]
  },
  "sequelize": {
    "alias": "",
    "dialect": "mysql",
    "host": "localhost",
    "port": 3307,
    "database": "*****",
    "auth": {
      "user": "",
      "pass": "*****"
    },
    "tables": {
      "content_items": "content_items",
      "articles": "content_items",
      "pages": "pages",
      "newspapers": "newspapers",
      "users": "auth_user"
    }
  },
  "solrConfiguration": {
    "servers": [
      {
        "id": "default",
        "baseUrl": "https://localhost:8983/solr",
        "auth": {
          "read": { "username": "reader", "password": "..." },
          "write": { "username": "writer", "password": "..." }
        }
      }
    ],
    "namespaces": [
      { "namespaceId": "search", "serverId": "default", "index": "impresso" },
      { "namespaceId": "mentions", "serverId": "default", "index": "impresso_mentions_test" },
      { "namespaceId": "topics", "serverId": "default", "index": "impresso_topics_dev" },
      { "namespaceId": "entities", "serverId": "default", "index": "impresso_entities_dev" },
      { "namespaceId": "images", "serverId": "default", "index": "impresso_images_dev", "schemaVersion": "v2" },
      { "namespaceId": "tr_passages", "serverId": "default", "index": "impresso_tr_passages" },
      { "namespaceId": "tr_clusters", "serverId": "default", "index": "impresso_tr_clusters" },
      { "namespaceId": "word_embeddings", "serverId": "default", "index": "impresso_word_emb_dev" }
    ]
  },
  "recommender": {
    "articles": {
      "endpoint": "https://.../recsys"
    }
  }
}
