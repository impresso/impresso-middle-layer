{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "ContentItem",
    "description": "Schema for core fields of media content items in the Impresso project.",
    "type": "object",
    "properties": {
        "id": {
            "type": "string",
            "description": "Unique identifier for the content item"
        },
        "meta_journal_s": {
            "type": "string",
            "description": "Media title alias. Will soon be deprecated in favor of meta_media_s."
        },
        "meta_year_i": {
            "type": "integer",
            "description": "Year of publication/broadcast"
        },
        "meta_month_i": {
            "type": "integer",
            "minimum": 1,
            "maximum": 12,
            "description": "Month of publication/broadcast"
        },
        "meta_yearmonth_s": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}$",
            "description": "Year-month in YYYY-MM format"
        },
        "meta_day_i": {
            "type": "integer",
            "minimum": 1,
            "maximum": 31,
            "description": "Day of publication/broadcast"
        },
        "meta_ed_s": {
            "type": "string",
            "description": "Edition identifier"
        },
        "meta_date_dt": {
            "type": "string",
            "format": "date-time",
            "description": "Full date and time in ISO 8601 format"
        },
        "meta_issue_id_s": {
            "type": "string",
            "description": "Issue identifier"
        },
        "meta_source_type_s": {
            "type": "string",
            "enum": [
                "newspaper",
                "radio_broadcast",
                "radio_magazine",
                "radio_schedule",
                "monograph",
                "encyclopedia"
            ],
            "description": "Type of the media source. Should be a value from impresso-essentials.utils SourceType enum.",
            "nullable": true
        },
        "meta_source_medium_s": {
            "type": "string",
            "description": "Medium of the source (audio for audio radio broadcasts, print for newspapers, typescript for digitised radio bulletin typescripts).",
            "enum": [
                "audio",
                "print",
                "typescript"
            ],
            "nullable": true
        }
    },
    "meta_start_time_s": {
        "type": "string",
        "pattern": "^\\d{2}:\\d{2}:\\d{2}$",
        "description": "Start time of media in HH:MM:SS format (relative to the day of broadcast). Applies only to audio radio broadcasts."
    },
    "meta_duration_s": {
        "type": "string",
        "pattern": "^\\d{2}:\\d{2}:\\d{2}$",
        "description": "Duration of the radio broadcast in HH:MM:SS format (relative to the start of the broadcast on the given broadcast day).  Applies only to audio radio broadcasts.\""
    },
    "required": [
        "id",
        "meta_journal_s",
        "meta_year_i",
        "meta_month_i",
        "meta_day_i",
        "meta_date_dt"
    ],
    "dependentRequired": {
        "meta_source_medium_s": [
            "meta_source_type_s"
        ],
        "meta_source_type_s": [
            "meta_source_medium_s"
        ]
    },
    "if": {
        "properties": {
            "meta_source_medium_s": {
                "const": "audio"
            }
        }
    },
    "then": {
        "required": [
            "meta_start_time_s",
            "meta_duration_s"
        ]
    },
    "additionalProperties": false
}